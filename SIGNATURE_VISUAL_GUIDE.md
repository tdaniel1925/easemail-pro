# ğŸ¨ Signature System - Visual Flow Guide

## ğŸ“¸ User Interface Overview

### 1. Settings Page - Signatures Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Settings                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ“ Email Signatures                   [+ New Signature]    â”‚
â”‚  Create and manage email signatures                         â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Work Signature                       Active    [ğŸŸ¢]  â”‚  â”‚
â”‚  â”‚ Default â€¢ For john@company.com                       â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚ â”‚ John Doe                                        â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ Product Manager                                 â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ TechCorp Inc.                                   â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ ğŸ“§ john@company.com | ğŸ“ +1 (555) 123-4567     â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ ğŸŒ www.techcorp.com                            â”‚  â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ [Edit]  [Preview]  [Delete]                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Signature Editor Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create New Signature                                   [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Signature Name                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Work Signature                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  Apply to Account                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ All Accounts â–¼                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  Template Variables (click to insert)                        â”‚
â”‚  [{{fullName}}] [{{email}}] [{{title}}] [{{company}}]       â”‚
â”‚  [{{phone}}] [{{website}}]                                   â”‚
â”‚                                                                â”‚
â”‚  Signature Content              [ğŸ‘ Preview]  [<> HTML]      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [B] [I] [U] | [ğŸ”—]                                     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚ {{fullName}}                                           â”‚  â”‚
â”‚  â”‚ {{title}}                                              â”‚  â”‚
â”‚  â”‚ {{company}}                                            â”‚  â”‚
â”‚  â”‚ ğŸ“§ {{email}} | ğŸ“ {{phone}}                           â”‚  â”‚
â”‚  â”‚ ğŸŒ {{website}}                                         â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  Signature Settings                                           â”‚
â”‚  â˜‘ Active (use in new emails)                                â”‚
â”‚  â˜‘ Set as default signature                                  â”‚
â”‚  â˜‘ Use for replies and reply all                             â”‚
â”‚  â˜‘ Use for forwards                                          â”‚
â”‚                                                                â”‚
â”‚                                      [Cancel]  [ğŸ’¾ Save]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. Email Composer - With Signature Controls

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  New Message                           [ï¼] [â–¡] [âœ•]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  To      â”‚ recipient@example.com                             â”‚
â”‚  Subject â”‚ Hello                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [B] [I] [U] | [â€¢] | [ğŸ”—] [ğŸ–¼]  â”Š  [ğŸ–Šâœ“] [Work Signature â–¼]  â”‚
â”‚                                   â””â”€Signature Controlsâ”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Hi there,                                                    â”‚
â”‚                                                                â”‚
â”‚  I hope this email finds you well...                         â”‚
â”‚                                                                â”‚
â”‚                                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚  John Doe                                                     â”‚
â”‚  Product Manager                                              â”‚
â”‚  TechCorp Inc.                                                â”‚
â”‚  ğŸ“§ john@company.com | ğŸ“ +1 (555) 123-4567                  â”‚
â”‚  ğŸŒ www.techcorp.com                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        [Save Draft]  [Send]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
  ğŸ–Šâœ“ = Pen icon with checkmark (signature is active)
  ğŸ–Š  = Pen icon without checkmark (signature is off)
  [Work Signature â–¼] = Dropdown to select different signature
```

---

## ğŸ”„ User Flow Diagrams

### Flow 1: Creating First Signature

```
User clicks "Settings"
        â†“
Navigates to "Signatures" tab
        â†“
Sees empty state: "No signatures yet"
        â†“
Clicks "Create Your First Signature" button
        â†“
Modal opens with default template
        â†“
User fills in:
  â€¢ Name: "Work Signature"
  â€¢ Clicks {{fullName}}, {{email}}, {{title}} buttons
  â€¢ Content auto-fills with variables
        â†“
User toggles settings:
  âœ… Active
  âœ… Set as default
  âœ… Use for replies
        â†“
Clicks "Save Signature"
        â†“
Modal closes, signature appears in list
        â†“
Success! âœ…
```

---

### Flow 2: Composing Email with Signature

```
User clicks "Compose" button
        â†“
EmailCompose modal opens
        â†“
System checks:
  â€¢ Email type: compose
  â€¢ User has active default signature?
        â†“
YES â†’ Auto-insert signature at bottom
        â†“
User types message:
  "Hi there,
   
   I hope this email finds you well..."
        â†“
Cursor is above signature
        â†“
Signature displays below with variables replaced:
  "John Doe
   Product Manager
   TechCorp Inc.
   ğŸ“§ john@company.com..."
        â†“
User clicks "Send"
        â†“
Email sent with signature! âœ…
```

---

### Flow 3: Replying with Smart Signature Placement

```
User clicks "Reply" on an email
        â†“
EmailCompose opens with:
  â€¢ To: sender@example.com
  â€¢ Subject: Re: Original subject
  â€¢ Body: quoted content
        â†“
System checks:
  â€¢ Email type: reply
  â€¢ Signature has "Use for replies" enabled?
        â†“
YES â†’ Insert signature BEFORE quoted content
        â†“
Result:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ [User types reply here]    â”‚
  â”‚                            â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
  â”‚ John Doe                   â”‚
  â”‚ Product Manager            â”‚
  â”‚ john@company.com           â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
  â”‚                            â”‚
  â”‚ On Oct 31, 2025, wrote:   â”‚
  â”‚ > Original message...      â”‚
  â”‚ > [quoted content]         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
User types reply above signature
        â†“
Clicks "Send"
        â†“
Reply sent with proper formatting! âœ…
```

---

### Flow 4: Toggle Signature On/Off

```
User is composing email
Signature is auto-inserted
        â†“
User decides: "I don't want signature on this email"
        â†“
Clicks pen icon (ğŸ–Šâœ“) in toolbar
        â†“
Checkmark disappears (ğŸ–Š)
Signature is removed from body
        â†“
User continues typing without signature
        â†“
Later, user changes mind: "Actually, I do want it"
        â†“
Clicks pen icon again (ğŸ–Š)
        â†“
Checkmark appears (ğŸ–Šâœ“)
Signature re-inserted
        â†“
User has full control! âœ…
```

---

### Flow 5: Switch Between Multiple Signatures

```
User has 3 signatures:
  â€¢ Work Signature (default)
  â€¢ Personal Signature
  â€¢ Sales Signature
        â†“
Composing email, "Work Signature" auto-inserted
        â†“
User thinks: "This is a sales email, need different signature"
        â†“
Clicks "Work Signature â–¼" dropdown
        â†“
Dropdown shows:
  â˜‘ Work Signature (Default)
  â˜ Personal Signature
  â˜ Sales Signature
        â†“
User clicks "Sales Signature"
        â†“
System:
  1. Removes "Work Signature" from body
  2. Inserts "Sales Signature" at same position
        â†“
Body updates instantly with new signature
        â†“
User continues composing
        â†“
Flexibility achieved! âœ…
```

---

## ğŸ¯ Signature Insertion Logic

### For New Emails (Compose)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Message:                        â”‚
â”‚ "Hi, this is my email content..."   â”‚
â”‚                                      â”‚
â”‚ [blank line]                         â”‚
â”‚ [blank line]                         â”‚
â”‚                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚ SIGNATURE HERE                       â”‚
â”‚ (auto-inserted at bottom)            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### For Replies/Forwards

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Reply:                          â”‚
â”‚ "Thanks for your email..."           â”‚
â”‚                                      â”‚
â”‚ [blank line]                         â”‚
â”‚ [blank line]                         â”‚
â”‚                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚ SIGNATURE HERE                       â”‚
â”‚ (inserted before quoted content)     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚                                      â”‚
â”‚ [blank line]                         â”‚
â”‚                                      â”‚
â”‚ On Oct 31, 2025, sender wrote:      â”‚
â”‚ > Original message...                â”‚
â”‚ > [quoted content continues]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Interface                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  Settings Page          Email Composer     Editor Modal â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ List     â”‚          â”‚ Compose  â”‚       â”‚ Create/  â”‚ â”‚
â”‚  â”‚ View     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ with     â”‚       â”‚ Edit     â”‚ â”‚
â”‚  â”‚ Edit     â”‚          â”‚ Signatureâ”‚â—„â”€â”€â”€â”€â”€â–ºâ”‚ Signatureâ”‚ â”‚
â”‚  â”‚ Delete   â”‚          â”‚ Controls â”‚       â”‚          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚                      â”‚                   â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚
            â”‚  useSignatures()  React Hook
            â”‚              â”‚
            â”‚  â€¢ Load signatures
            â”‚  â€¢ Get applicable signature
            â”‚  â€¢ Render with variables
            â”‚              â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚
  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
  â”‚           â”‚            â”‚             â”‚
  â”‚ Signature â”‚            â”‚ API Routes  â”‚
  â”‚ Service   â”‚            â”‚             â”‚
  â”‚           â”‚            â”‚ /signatures â”‚
  â”‚ â€¢ Replace â”‚            â”‚   GET       â”‚
  â”‚   variablesâ”‚           â”‚   POST      â”‚
  â”‚ â€¢ Insert  â”‚            â”‚             â”‚
  â”‚   positionâ”‚            â”‚ /[id]       â”‚
  â”‚ â€¢ Strip   â”‚            â”‚   GET       â”‚
  â”‚   signatureâ”‚           â”‚   PUT       â”‚
  â”‚           â”‚            â”‚   DELETE    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                           â”‚             â”‚
                           â”‚  Database   â”‚
                           â”‚             â”‚
                           â”‚ emailSignatures
                           â”‚   â€¢ id
                           â”‚   â€¢ userId
                           â”‚   â€¢ name
                           â”‚   â€¢ contentHtml
                           â”‚   â€¢ isDefault
                           â”‚   â€¢ isActive
                           â”‚   â€¢ useForReplies
                           â”‚   â€¢ ...
                           â”‚             â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow

### Creating a Signature

```
User fills form
     â”‚
     â–¼
SignatureEditorModal
     â”‚
     â–¼
POST /api/signatures
     â”‚
     â–¼
Validate data
     â”‚
     â–¼
Check if default â†’ unset others
     â”‚
     â–¼
INSERT into emailSignatures
     â”‚
     â–¼
Return signature
     â”‚
     â–¼
UI updates list
```

### Auto-Inserting Signature

```
EmailCompose opens
     â”‚
     â–¼
useSignatures() hook
     â”‚
     â–¼
getApplicableSignature(type, accountId)
     â”‚
     â”œâ”€â–º Check account-specific signature
     â”œâ”€â–º Fall back to default
     â””â”€â–º Check useForReplies/useForForwards
     â”‚
     â–¼
renderSignature(sig, user, account)
     â”‚
     â”œâ”€â–º Replace {{fullName}}
     â”œâ”€â–º Replace {{email}}
     â””â”€â–º Replace all variables
     â”‚
     â–¼
SignatureService.insertSignature(body, sig, options)
     â”‚
     â”œâ”€â–º type = 'compose' â†’ append at end
     â””â”€â–º type = 'reply' â†’ insert before quoted content
     â”‚
     â–¼
setBody(newBodyWithSignature)
     â”‚
     â–¼
User sees signature in composer âœ…
```

---

## ğŸ¨ UI States

### Empty State (No Signatures)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ–Šï¸                 â”‚
â”‚                            â”‚
â”‚   No signatures yet        â”‚
â”‚                            â”‚
â”‚  [Create Your First        â”‚
â”‚   Signature]               â”‚
â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Loading State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Loading signatures...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Active Signature with Controls
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Work Signature      Active  [ğŸŸ¢]  â”‚
â”‚ Default â€¢ All Accounts             â”‚
â”‚                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ John Doe                       â”‚ â”‚
â”‚ â”‚ Product Manager                â”‚ â”‚
â”‚ â”‚ ...                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚ [Edit]  [Preview]  [Delete]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Success Indicators

### User Knows Signature is Active
- âœ… Pen icon has checkmark (ğŸ–Šâœ“)
- âœ… Signature visible in email body
- âœ… Toggle is in ON position (blue, right-aligned)

### User Knows Signature is Off
- âŒ Pen icon has no checkmark (ğŸ–Š)
- âŒ No signature in email body
- âŒ Toggle is in OFF position (gray, left-aligned)

### User Knows Which Signature is Selected
- Current signature name shown in dropdown
- Selected item highlighted in dropdown menu

---

## ğŸš€ Quick Reference

### Keyboard Shortcuts (Future Enhancement)
- `Ctrl+Shift+S` - Toggle signature on/off
- `Ctrl+Shift+D` - Open signature dropdown

### Button Icons
- ğŸ–Šï¸ **PenTool** - Signature button
- âœ“ **Check** - Signature is active
- â–¼ **ChevronDown** - Dropdown menu

### Colors
- **Primary (Blue)** - Active signature, selected items
- **Muted (Gray)** - Inactive signature, unselected items
- **Destructive (Red)** - Delete button

---

This visual guide shows exactly how the signature system works from the user's perspective. Every interaction is intuitive and provides clear visual feedback! ğŸ‰

